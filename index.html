<!DOCTYPE html>
<html>
<head>
<title>Linkarsha</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
background:linear-gradient(135deg,#eef2ff,#f5f3ff,#fafafa);
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
}

.card{
width:420px;
max-width:92%;
background:white;
border-radius:30px;
padding:40px 30px;
box-shadow:0 40px 80px rgba(0,0,0,0.12);
text-align:center;
}

.logo{
font-size:34px;
font-weight:800;
margin-bottom:8px;
}

.tag{
color:#666;
margin-bottom:25px;
}

input{
width:100%;
padding:16px;
margin:8px 0;
border-radius:14px;
border:1px solid #eee;
font-size:15px;
}

button{
width:100%;
padding:16px;
margin-top:10px;
border:none;
border-radius:14px;
font-weight:700;
cursor:pointer;
background:linear-gradient(135deg,#6366f1,#7c3aed);
color:white;
}

.searchBox{
margin-bottom:25px;
}
</style>
</head>

<body>
<div class="card">

<div class="logo">Linkarsha</div>
<div class="tag">Create • Share • Discover creators</div>

<input class="searchBox" id="search" placeholder="Search creators...">

<hr style="margin:20px 0">

<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<input id="username" placeholder="Username">

<button onclick="signup()">Create Account</button>
<button onclick="login()">Login</button>

</div>

<script>
const { createClient } = supabase;

const supabaseClient=createClient(
"https://pibrvhziqkaitaacbegy.supabase.co",
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpYnJ2aHppcWthaXRhYWNiZWd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0Mzc3MDQsImV4cCI6MjA4NzAxMzcwNH0.gBi73cyS6exLNfm1iz6IwAzWFXXxFAjgjlnbuHx7HMw"
);

document.getElementById("search").addEventListener("keypress",function(e){
if(e.key==="Enter"){
let u=this.value.toLowerCase().trim();
if(u) window.location="/"+u;
}
});

async function signup(){

const email=document.getElementById("email").value;
const password=document.getElementById("password").value;
const username=document.getElementById("username").value.toLowerCase();

if(!email||!password||!username){alert("Fill all");return;}

const {data,error}=await supabaseClient.auth.signUp({email,password});

if(error){alert(error.message);return;}

await supabaseClient.from("profiles").insert([
{id:data.user.id,username:username}
]);

alert("Account created. Login now.");
}

async function login(){

const email=document.getElementById("email").value;
const password=document.getElementById("password").value;

const {error}=await supabaseClient.auth.signInWithPassword({email,password});

if(error){alert(error.message);return;}

location.href="/dashboard";
}
</script>
</body>
</html>
